\usemodule[filter]

\defineexternalfilter
  [ASY]
  [filter=asy -tex context -outformat pdf -outname \externalfilteroutputfile\space  ,
   output=\externalfilterbasefile.pdf,
   readcommand=\groupexternalfigure,
   continue=yes]

\def\groupexternalfigure#1{\externalfigure[#1]}

\starttext

\startASY[plot]
import graph;  
unitsize(1cm);

xlimits( -3, 3);  
ylimits( -1, 5);

xaxis("$x$", Ticks(modify=NoZero,
                   1bp+red,
                   end=false),
      arrow=Arrow);

yaxis("$y$", Ticks(modify=NoZero,
                   1bp+red,
                   end=false),
      arrow=Arrow);

labelx(scale(.75)*"$O$",0,SW);
 
  real f(real x)
  {
  return x^2;
  }

  draw(graph(f,-2,2));
\stopASY

\externalfigure[\jobname-plot][width=2cm]

\stoptext

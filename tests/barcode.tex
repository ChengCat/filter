\usemodule[filter]

\defineexternalfilter
  [barcode]
  [encoding=code128,
   output=\externalfilterbasefile.pdf,
   label=yes,
   checksum=no,
   continue=yes,
   filtercommand=\barcodefiltercommand,
   readcommand=\barcodereadcommand]

\def\barcodereadcommand#1%
  {\externalfigure[#1][object=no]}

\unprotected\def\barcodefiltercommand
  {barcode -i \externalfilterinputfile\space -o \externalfilterbasefile.eps\space
   -E % EPS output
   -e \externalfilterparameter{encoding}
   %\doif{\externalfilterparameter{checksum}}\v!no{-c}
   %\doif{\externalfilterparameter{label}}\v!no{-n} 
   &&
   epstopdf \externalfilterbasefile.eps --outfile=\externalfilteroutputfile
   }

\traceexternalfilters

\starttext
\inlinebarcode!Hello World!

\placefigure{A Bar code}{\inlinebarcode{barcode}}
\stoptext

